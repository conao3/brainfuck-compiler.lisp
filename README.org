#+author: conao3
#+date: <2018-10-25 Thu>

[[https://github.com/conao3/brainfuck-compiler.lisp][https://raw.githubusercontent.com/conao3/files/master/blob/headers/png/brainfuck-compiler.lisp.png]]
[[https://github.com/conao3/brainfuck-compiler.lisp/blob/master/LICENSE][https://img.shields.io/github/license/conao3/brainfuck-compiler.lisp.svg?style=flat-square]]
[[https://github.com/conao3/brainfuck-compiler.lisp/releases][https://img.shields.io/github/tag/conao3/brainfuck-compiler.lisp.svg?style=flat-square]]
[[https://www.patreon.com/conao3][https://img.shields.io/badge/patreon-become%20a%20patron-orange.svg?logo=patreon&style=flat-square]]
[[https://twitter.com/conao_3][https://img.shields.io/badge/twitter-@conao__3-blue.svg?logo=twitter&style=flat-square]]
[[https://conao3-support.slack.com/join/shared_invite/enQtNjUzMDMxODcyMjE1LTA4ZGRmOWYwZWE3NmE5NTkyZjk3M2JhYzU2ZmRkMzdiMDdlYTQ0ODMyM2ExOGY0OTkzMzZiMTNmZjJjY2I5NTM#/shared-invite/email][https://img.shields.io/badge/chat-on_slack-blue.svg?logo=slack&style=flat-square]]

* Table of Contents
- [[#description][Description]]
- [[#requirements][Requirements]]
- [[#installation][Installation]]
- [[#usage][Usage]]
- [[#how-it-works][How It Works]]
- [[#contributing][Contributing]]
- [[#license][License]]

* Description
LBC (Lisp Brainfuck Compiler) is a Brainfuck-to-LLVM-IR compiler written in Common Lisp.

It compiles Brainfuck source code into LLVM intermediate representation, which can then be executed directly using ~lli~ or compiled to native code using ~llc~.

* Requirements
- [[https://roswell.github.io/][Roswell]] - Common Lisp implementation manager
- [[https://llvm.org/][LLVM]] - For ~lli~ (interpreter) or ~llc~ (native compilation)

* Installation
Clone the repository into your Roswell local projects directory:

#+begin_src shell
cd ~/.roswell/local-projects
git clone https://github.com/conao3/brainfuck-compiler.lisp lbc
#+end_src

* Usage
Basic usage - compile and run a Brainfuck program:

#+begin_src shell
ros src/lbc.ros hello.bf | lli
#+end_src

You can also save the generated LLVM IR to a file:

#+begin_src shell
ros src/lbc.ros hello.bf > hello.ll
lli hello.ll
#+end_src

Or compile to native code for better performance:

#+begin_src shell
ros src/lbc.ros program.bf > program.ll
llc program.ll -o program.o -filetype=obj
cc program.o -o program
./program
#+end_src

* How It Works
LBC parses Brainfuck instructions and emits corresponding LLVM IR. The compiler:

1. Allocates a 30,000-byte memory tape using ~calloc~
2. Translates each Brainfuck instruction to LLVM IR:
   - ~>~ / ~<~ : Move the data pointer right/left
   - ~+~ / ~-~ : Increment/decrement the current cell
   - ~.~ : Output the current cell as a character
   - ~[~ / ~]~ : Loop while the current cell is non-zero
3. Frees the allocated memory and returns

* Contributing
Contributions are welcome. Feel free to open issues for bug reports or feature requests, and submit pull requests for improvements.

* License
MIT License

Copyright (c) Naoya Yamashita ([[https://github.com/conao3][conao3]]) - https://conao3.com

See [[https://github.com/conao3/brainfuck-compiler.lisp/blob/master/LICENSE][LICENSE]] for details.
